<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SpeedCameraPi: Installing Required Dependencies</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="speed_64.ico"/></td>
  <td id="projectalign">
   <div id="projectname">SpeedCameraPi<span id="projectnumber">&#160;1.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_Docs_markdown_InstallingRequiredDependency.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Installing Required Dependencies </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This project requires the following dependencies to be installed:</p>
<ul>
<li>OpenCV v4.5.5<ul>
<li>Powerful computer vision library that provides a vast range of image and video processing capabilities.</li>
</ul>
</li>
<li>wxWidgets v3.2.2<ul>
<li>GUI toolkit that allows you to create cross-platform desktop applications with ease.</li>
</ul>
</li>
<li>libcamera v0.0.4<ul>
<li>C++ library for interfacing with the Raspberry Pi camera module.</li>
</ul>
</li>
</ul>
<p >If these dependencies are not installed properly, the compilation process of your project may fail or produce unexpected errors during runtime.</p>
<p >The following sections will guide you through the installation process of these dependencies on Raspberry Pi 4 running Debian. The installation process may involve downloading and compiling the source code yourself or using a package manager to install pre-built binary packages. You may skip this section if the required dependencies are already installed.</p>
<p >To further simplify the installation process, we have provided a set of scripts that will automatically install the required dependencies for you. You may choose to run the scripts or follow the steps manually. It is also recommended to perform installation on fresh installation of Raspberry Pi OS to prevent any conflicts with existing packages.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Preparing the system</h1>
<p >Before installing the required dependencies, following steps are required to be done:</p>
<ul>
<li>Navigate to scripts directory: <pre class="fragment">  cd ~/SpeedCameraPi/scripts/Installation
</pre></li>
<li>Allow script to be executed: <pre class="fragment">  sudo chmod +x DI_Scripts1.sh
</pre></li>
<li>Run script: <pre class="fragment">  sudo ./DI_Scripts1.sh
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Explanation of script</h2>
<ul>
<li>Update the package list and upgrade all packages to their latest versions: <pre class="fragment">  sudo apt-get update &amp;&amp; sudo apt-get upgrade
</pre></li>
<li>Increase swap size to 4096MByte to prevent the system from running out of memory during the compilation process: <pre class="fragment">  NEW_SWAPSIZE=4096
  sudo sed -i "s/CONF_SWAPSIZE=.*/CONF_SWAPSIZE=$NEW_SWAPSIZE/" /etc/dphys-swapfile
  sudo sed -i "s/CONF_MAXSWAP=.*/CONF_MAXSWAP=$NEW_SWAPSIZE/" /sbin/dphys-swapfile
  sudo systemctl restart dphys-swapfile
</pre> </li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
Installing OpenCV</h1>
<p >OpenCV is a powerful computer vision library that provides a vast range of image and video processing capabilities. This project uses OpenCV to perform image processing tasks such as detecting and tracking objects in the video stream.</p>
<p >Steps to install OpenCV on Raspberry Pi 4 running Debian: <a href="https://qengineering.eu/install-opencv-4.5-on-raspberry-pi-4.html">[source]</a></p>
<ul>
<li>Navigate to scripts directory: <pre class="fragment">  cd ~/SpeedCameraPi/scripts/Installation
</pre></li>
<li>Allow script to be executed: <pre class="fragment">  sudo chmod +x DI_Scripts2.sh
</pre></li>
<li>Run script: <pre class="fragment">  sudo ./DI_Scripts2.sh
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
Explanation of script</h2>
<ul>
<li>Update the package list and upgrade all packages to their latest versions: <pre class="fragment">  sudo apt-get update &amp;&amp; sudo apt-get upgrade
</pre></li>
<li>Install the required dependencies for building OpenCV: <pre class="fragment">  sudo apt-get install -y build-essential cmake git unzip pkg-config
  sudo apt-get install -y libjpeg-dev libtiff-dev libpng-dev
  sudo apt-get install -y libavcodec-dev libavformat-dev libswscale-dev
  sudo apt-get install -y libgtk2.0-dev libcanberra-gtk* libgtk-3-dev
  sudo apt-get install -y libgstreamer1.0-dev gstreamer1.0-gtk3
  sudo apt-get install -y libgstreamer-plugins-base1.0-dev gstreamer1.0-gl
  sudo apt-get install -y libxvidcore-dev libx264-dev
  sudo apt-get install -y python3-dev python3-numpy python3-pip
  sudo apt-get install -y libtbb2 libtbb-dev libdc1394-22-dev
  sudo apt-get install -y libv4l-dev v4l-utils
  sudo apt-get install -y libopenblas-dev libatlas-base-dev libblas-dev
  sudo apt-get install -y liblapack-dev gfortran libhdf5-dev
  sudo apt-get install -y libprotobuf-dev libgoogle-glog-dev libgflags-dev
  sudo apt-get install -y protobuf-compiler
</pre></li>
<li>Download OpenCV version 4.5.5 from the repository: <pre class="fragment">  cd ~ 
  sudo rm -rf opencv*
  wget -O opencv.zip https://github.com/opencv/opencv/archive/4.5.5.zip 
  wget -O opencv_contrib.zip https://github.com/opencv/opencv_contrib/archive/4.5.5.zip 
  unzip opencv.zip 
  unzip opencv_contrib.zip 
  mv opencv-4.5.5 opencv
  mv opencv_contrib-4.5.5 opencv_contrib
  rm opencv.zip
  rm opencv_contrib.zip
</pre></li>
<li>Create a build directory and navigate to it: <pre class="fragment">  cd ~/opencv
  mkdir build
  cd build
</pre></li>
<li>Configure the build process by running the following command: <pre class="fragment">  cmake -D CMAKE_BUILD_TYPE=RELEASE \
  -D CMAKE_INSTALL_PREFIX=/usr/local \
  -D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib/modules \
  -D ENABLE_NEON=ON \
  -D WITH_OPENMP=ON \
  -D WITH_OPENCL=OFF \
  -D BUILD_TIFF=ON \
  -D WITH_FFMPEG=ON \
  -D WITH_TBB=ON \
  -D BUILD_TBB=ON \
  -D WITH_GSTREAMER=ON \
  -D BUILD_TESTS=OFF \
  -D WITH_EIGEN=OFF \
  -D WITH_V4L=ON \
  -D WITH_LIBV4L=ON \
  -D WITH_VTK=OFF \
  -D WITH_QT=ON \
  -D OPENCV_ENABLE_NONFREE=ON \
  -D INSTALL_C_EXAMPLES=OFF \
  -D INSTALL_PYTHON_EXAMPLES=OFF \
  -D OPENCV_FORCE_LIBATOMIC_COMPILER_CHECK=1 \
  -D PYTHON3_PACKAGES_PATH=/usr/lib/python3/dist-packages \
  -D OPENCV_GENERATE_PKGCONFIG=ON \
  -D BUILD_EXAMPLES=OFF ..
</pre></li>
<li>Compile and install the library: <pre class="fragment">          make -j1
          sudo make install
          sudo ldconfig
</pre> </li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Installing wxWidget</h1>
<p >wxWidgets is a cross-platform GUI library that provides a set of C++ classes for creating graphical user interfaces. This project uses wxWidgets to create the graphical user interface for the application.</p>
<p >Steps to install wxWidget on Raspberry Pi 4 running Debian: <a href="https://forums.raspberrypi.com/viewtopic.php?t=271709">[source]</a></p>
<ul>
<li>Navigate to scripts directory: <pre class="fragment">  cd ~/SpeedCameraPi/scripts/Installation
</pre></li>
<li>Allow script to be executed: <pre class="fragment">  sudo chmod +x DI_Scripts3.sh
</pre></li>
<li>Run script: <pre class="fragment">  sudo ./DI_Scripts3.sh
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md11"></a>
Explanation of script</h2>
<ul>
<li>Update the package list and upgrade all packages to their latest versions: <pre class="fragment">  sudo apt-get update &amp;&amp; sudo apt-get upgrade
</pre></li>
<li>Install the required dependencies for building wxWidgets: <pre class="fragment">  sudo apt-get install libgtk-3-dev build-essential checkinstall
</pre></li>
<li>Download the latest stable version of wxWidgets from the official website: <pre class="fragment">  wget https://github.com/wxWidgets/wxWidgets/releases/download/v3.2.2.1/wxWidgets-3.2.2.1.tar.bz2
</pre></li>
<li>Extract the downloaded archive and navigate to the extracted directory: <pre class="fragment">  tar -xvf wxWidgets-3.2.2.1.tar.bz2
</pre></li>
<li>Change directory to the extracted directory: <pre class="fragment">  cd wxWidgets-3.2.2.1
</pre></li>
<li>Create a build directory and navigate to it: <pre class="fragment">  mkdir gtk-build

  cd gtk-build
</pre></li>
<li>Configure the build process by running the following command: <pre class="fragment">  ../configure --disable-shared --enable-unicode --disable-debug
</pre></li>
<li>Compile and install the library: <pre class="fragment">  make

  sudo make install
</pre> </li>
</ul>
<h1><a class="anchor" id="autotoc_md12"></a>
Installing libcamera</h1>
<p >Libcamera is an open-source software stack designed to support complex camera configurations on Raspberry Pi and other embedded devices. It provides a unified interface for multiple camera modules, allowing developers to efficiently harness their full potential in various applications, from computer vision projects to advanced photography.</p>
<p >As of now, libcamera is still under development and is still in alpha stage. However, it is already being used by the Raspberry Pi Foundation to support the Raspberry Pi High Quality Camera Module. It is recommended to use libcamera in the future as it provides a more flexible and powerful interface for controlling the camera module.</p>
<p >For this project, we will be using v0.0.4. As of now, a more higher version is available, however as still in alpha stage, a lot of changes are still being made. When a more stable release is available, we will update this guide.</p>
<p >Steps to install Libcamera v0.0.4 on Raspberry Pi 4 running Debian:</p>
<ul>
<li>Navigate to scripts directory: <pre class="fragment">  cd ~/SpeedCameraPi/scripts/Installation
</pre></li>
<li>Allow script to be executed: <pre class="fragment">  sudo chmod +x DI_Scripts4.sh
</pre></li>
<li>Run script: <pre class="fragment">  sudo ./DI_Scripts4.sh
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
Explanation of script</h2>
<ul>
<li>Update the package list and upgrade all packages to their latest versions: <pre class="fragment">  sudo apt-get update &amp;&amp; sudo apt-get upgrade
</pre></li>
<li>Install the required dependencies for building libcamera: <pre class="fragment">  sudo apt install -y libboost-dev
  sudo apt install -y libgnutls28-dev openssl libtiff5-dev pybind11-dev
  sudo apt install -y qtbase5-dev libqt5core5a libqt5gui5 libqt5widgets5
  sudo apt install -y meson
  sudo apt install -y cmake
  sudo pip3 install pyyaml ply
  sudo pip3 install --upgrade meson
  sudo apt install -y libglib2.0-dev libgstreamer-plugins-base1.0-dev
</pre></li>
<li>Download the repository and checkout to v0.0.4: <pre class="fragment">  cd ~
  git clone https://github.com/raspberrypi/libcamera.git
  cd libcamera
  git checkout v0.0.4
</pre></li>
<li>Configure and build the library: <pre class="fragment">  meson build --buildtype=release -Dpipelines=raspberrypi -Dipas=raspberrypi -Dv4l2=true -Dgstreamer=enabled -Dtest=false -Dlc-compliance=disabled -Dcam=disabled -Dqcam=enabled -Ddocumentation=disabled -Dpycamera=enabled
  ninja -C build -j2   # use -j 2 on Raspberry Pi 3 or earlier devices
  sudo ninja -C build install
</pre> </li>
</ul>
<h1><a class="anchor" id="autotoc_md14"></a>
Clean up</h1>
<p >After installing the required dependencies, you may want to clean up the unnecessary files to free up some disk space. To do so, run the following commands:</p>
<ul>
<li>Navigate to scripts directory: <pre class="fragment">  cd ~/SpeedCameraPi/scripts/Installation
</pre></li>
<li>Allow script to be executed: <pre class="fragment">  sudo chmod +x DI_Scripts5.sh
</pre></li>
<li>Run script: <pre class="fragment">  sudo ./DI_Scripts5.sh
</pre></li>
</ul>
<h1><a class="anchor" id="autotoc_md15"></a>
Utility Scripts</h1>
<p >This collection of scripts is not necessary for the installation of the required dependencies. However, it is recommended to run these scripts to ensure that the system is properly configured for the project.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Hotspot</h2>
<p >This script will configure the Raspberry Pi to enable the hotspot feature whenever it is not connected to local network. This will allow you to connect to the Raspberry Pi directly when you are not at home.</p>
<ul>
<li>Navigate to scripts directory: <pre class="fragment">  cd ~/SpeedCameraPi/scripts/Installation
</pre></li>
<li>Allow script to be executed: <pre class="fragment">  sudo chmod +x Hotspot.sh
</pre></li>
<li>Run script: <pre class="fragment">  sudo ./Hotspot.sh
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md17"></a>
Startup</h2>
<p >This script will configure the Raspberry Pi to automatically start the SpeedCameraPi application whenever it is booted up. This will allow you to use the Raspberry Pi as a standalone device without the need to manually start the application.</p>
<ul>
<li>Navigate to scripts directory: <pre class="fragment">  cd ~/SpeedCameraPi/scripts/Installation
</pre></li>
<li>Allow script to be executed: <pre class="fragment">  sudo chmod +x Startup.py
</pre></li>
<li>Run script: <pre class="fragment">  sudo ./Startup.py
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
Touchscreen</h2>
<p >This script will fix the touchscreen rotation issue. This will allow you to use the touchscreen in portrait mode.</p>
<ul>
<li>Navigate to scripts directory: <pre class="fragment">  cd ~/SpeedCameraPi/scripts/Installation
</pre></li>
<li>Allow script to be executed: <pre class="fragment">  sudo chmod +x Touchscreen.sh    
</pre></li>
<li>Run script: <pre class="fragment">  sudo ./Touchscreen.sh
</pre> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
